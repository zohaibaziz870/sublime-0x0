System.register(["./chunk-vendor.js","./chunk-frameworks.js","./chunk-input-demux.js","./chunk-ref-selector.js"],function(){"use strict";var h,d,x,gt,ye,pt,ht,te,je,bt,N,yt,B,V,ve,Se,ne,oe,jt,vt,we,St,k,Ae,Le,wt,At,qe,se,re,Lt,qt,xt,_t,Ct,Tt,Et;return{setters:[function(g){h=g.o,d=g.a,x=g.r,gt=g.I,ye=g.f,pt=g.c},function(g){ht=g.Z,te=g.z,je=g.aL,bt=g.aM,N=g.F,yt=g.c,B=g.ay,V=g.q,ve=g.R,Se=g.e,ne=g.aN,oe=g.y,jt=g.aO,vt=g.aP,we=g.aQ,St=g.aR,k=g.ax,Ae=g.aS,Le=g.g,wt=g.a9,At=g.s,qe=g.B,se=g.ar,re=g.ap,Lt=g.j,qt=g.u,xt=g.a6,_t=g.a1,Ct=g.aT,Tt=g.aU,Et=g.aV},function(){},function(){}],execute:function(){var g=Object.defineProperty,Bn=(e,t)=>g(e,"name",{value:t,configurable:!0});h("#js-spoof-warning-placeholder",{add:Bn(()=>{const e=document.getElementById("spoof-warning");if(!e)return;document.querySelector(".commit-title").classList.add("pb-1"),e.hidden=!1,e.removeAttribute("aria-hidden")},"showSpoofCommitBanner")});var $n=Object.defineProperty,Hn=(e,t)=>$n(e,"name",{value:t,configurable:!0});d("click",".js-conversation-menu-button",function(){let e=!0;return async function(t){if(e===!1){const s=t.currentTarget.closest(".select-menu").querySelector("details-menu");if(!s)return;s.innerHTML="";const r=`${s.getAttribute("src")}?instrument=1`,i=await fetch(r);i.ok&&(s.innerHTML=await i.text())}e=!1}}()),d("click",".js-conversations-menu-item",function(e){const t=e.currentTarget,n=t.closest(".js-conversations-details");n.hasAttribute("open")&&n.removeAttribute("open"),window.location.hash=t.hash,ht(document)}),d("click",".js-resolved-conversations",async function(e){const t=e.currentTarget.querySelector(".dropdown-caret"),n=e.currentTarget.querySelector(".select-menu-header");kt(t),n.classList.toggle("border-bottom-0")});function kt(e){e.style.transform===""?e.style.transform="rotate(180deg)":e.style.transform=""}Hn(kt,"flipCaret");var Dn=Object.defineProperty,ie=(e,t)=>Dn(e,"name",{value:t,configurable:!0});function Ft(e){const t=e.getAttribute("data-file-type"),n=ce("data-file-type",t),o=Array.from(document.querySelectorAll(".js-diff-file-type-option")).find(r=>r.value===t);if(!o)return!1;const s=o.checked!==n.length>0;return s&&(o.checked=n.length>0),s}ie(Ft,"toggleFileTypeInputs");function It(e,t){const n=e.getAttribute("data-file-deleted")==="true";let o=!1;if(n){const s=ce("data-file-deleted","true");o=t.checked!==(s.length===0),o&&(t.checked=s.length===0)}return o}ie(It,"toggleDeletedFiles");function Pt(e,t){const n=e.getAttribute("data-file-user-viewed")==="true";let o=!1;if(n){const s=ce("data-file-user-viewed","true");o=t.checked!==(s.length===0),o&&(t.checked=s.length===0)}return o}ie(Pt,"toggleViewedFiles");function ce(e,t){return Array.from(document.querySelectorAll(".js-details-container.open.Details--on")).filter(n=>n.getAttribute(e)===t)}ie(ce,"getExpandedDiffsForTarget");var Nn=Object.defineProperty,Vn=(e,t)=>Nn(e,"name",{value:t,configurable:!0});function xe(e,t,n,o,s,r){const i=document.querySelector(".js-file-filter"),c=new URL(window.location.href,window.location.origin);if(!e&&!o)return t||r?void 0:(c.search="",te(je(),"",c.toString()));const u=i.querySelector(".js-file-filter-form"),l=new FormData(u),a=n.filter(y=>!l.getAll("file-filters[]").includes(y)),m=s.filter(y=>!l.getAll("owned-by[]").includes(y));for(const y of a)l.append("file-filters[]",y);for(const y of m)l.append("owned-by[]",y);const p=new URLSearchParams(l);(!p.has("file-filters[]")||p.toString()==="")&&p.set("file-filters[]",""),t&&p.set("w","1"),r&&p.set("manifests","true"),c.search=p.toString(),te(je(),"",c.toString())}Vn(xe,"updateURLState");var Un=Object.defineProperty,b=(e,t)=>Un(e,"name",{value:t,configurable:!0});d("change",".js-diff-file-type-option",function(e){P(F()),$(e)}),d("change",".js-diff-owner-option",function(e){P(Q()),$(e)}),d("change",".js-manifests-option",function(e){P(ue()),$(e)}),d("click",".js-file-filter-select-all",function(){!ae()||(Ee(!0),P(F()))}),d("change",".js-deleted-files-toggle",function(e){P(F()),$(e)}),d("change",".js-viewed-files-toggle",function(e){P(F()),$(e)});function $(e){const t=e.currentTarget,o={file_filter_checked:t.checked};t.setAttribute("data-hydro-client-context",JSON.stringify(o)),bt(t)}b($,"instrumentFilterToggle");function U(e){Ht(e),Dt(e),Vt(),Nt(),Ut(),xe(e,Te(),z(),Q(),X(),ue())}b(U,"updateFileFilterComponents");function P(e){Bt(),U(e),W()}b(P,"applyFilters");function W(){const e=document.querySelector(".js-file-filter-blankslate");if(!e)return;if(document.querySelectorAll(".js-diff-progressive-loader").length>0){e.hidden=!0;return}const n=document.querySelectorAll(".js-file");if(n.length===0){e.hidden=!0;return}const o=Array.from(n).some(s=>!s.hidden);e.hidden=o}b(W,"checkEmptyFilterResults");function z(){return Array.from(K()).filter(t=>t.checked).map(t=>t.value)}b(z,"getSelectedFileTypes");function K(){return document.querySelectorAll(".js-diff-file-type-option")}b(K,"getFileTypeOptions");function Mt(){return document.querySelectorAll(".js-file")}b(Mt,"getFiles");function le(){const e=document.querySelector(".js-deleted-files-toggle");if(e instanceof HTMLInputElement)return e}b(le,"getDeletedFilesInput");function _e(){const e=document.querySelector(".js-viewed-files-toggle");if(e instanceof HTMLInputElement)return e}b(_e,"getViewedFilesInput");function Ce(){return document.querySelector(".js-manifests-option")}b(Ce,"getManifestFilesInput");function F(){return ae()||G()||Q()}b(F,"fileFilterActive");function Q(){return X().length>0}b(Q,"codeownerFilterActive");function X(){return Array.from(Rt()).filter(t=>t.checked).map(t=>t.value)}b(X,"getSelectedOwners");function Rt(){return document.querySelectorAll(".js-diff-owner-option")}b(Rt,"getOwnerOptions");function ae(){return z().length!==K().length}b(ae,"fileTypeFilterActive");function Te(){return new URLSearchParams(window.location.search).has("w")}b(Te,"whitespaceFilterActive");function ue(){const e=Ce();return e?e.checked:!1}b(ue,"manifestFilterActive");function G(){const e=le();return e?!e.checked:!1}b(G,"deletedFilterActive");function Ot(){const e=_e();return e?!e.checked:!1}b(Ot,"viewedFilterActive");function Bt(){const e=G(),t=z(),n=Mt(),o=X(),s=Ot(),r=Ce();for(const i of n){let c=!0;const u=i.getAttribute("data-file-type");u&&(c=t.includes(u)),s&&c&&i.hasAttribute("data-file-user-viewed")&&(c=!1),o.length>0&&c&&(c=(i.getAttribute("data-codeowners")||"").split(",").filter(a=>o.includes(a)).length>0),e&&c&&i.getAttribute("data-file-deleted")==="true"&&(c=!1),r&&r.checked&&c&&(i.hasAttribute("data-file-manifest")||(c=!1)),$t(i,c)}}b(Bt,"toggleFiles");function $t(e,t){const n=e.closest(".js-file.js-details-container");n.hidden=!t}b($t,"toggleFile");function Ht(e){document.querySelector(".js-file-filter-text").classList.toggle("color-fg-accent",e)}b(Ht,"toggleHighlightActiveFilter");function Dt(e){const t=document.querySelector(".js-reset-filters"),n=document.querySelector(".js-commits-filtered");t!=null&&!n&&(t.hidden=!e)}b(Dt,"toggleResetFileFiltersButton");function Nt(){const e=ae(),t=document.querySelector(".js-file-filter-select-all-container"),n=e?"data-select-all-markup":"data-all-selected-markup",o=t.getAttribute(n);t.textContent=o,t.classList.toggle("color-fg-muted",!e),t.classList.toggle("color-fg-accent",e)}b(Nt,"toggleSelectAll");function Ee(e){const t=K();for(const n of t)n.checked=e}b(Ee,"toggleAllFileTypeInputs");function Vt(){const e=K(),t=G();for(const n of e)if(t){const o=n.getAttribute("data-non-deleted-files-count")==="0";n.disabled=o}else n.disabled=!1}b(Vt,"toggleAvailableOptions");function Ut(){const e=document.querySelectorAll(".js-file-type-count");for(const t of e){const n=G()?"data-non-deleted-file-count-markup":"data-all-file-count-markup",o=t.getAttribute(n);o&&(t.textContent=o)}}b(Ut,"toggleFileTypeCounts"),h(".js-file-filter",function(){F()?U(!0):xe(!1,Te(),z(),Q(),X(),ue()),W()}),h(".js-diff-progressive-loader",function(e){e.addEventListener("loadend",function(){W()})}),d("click",".js-file-header .js-details-target",function({currentTarget:e}){if(!document.querySelector(".js-file-filter"))return;const n=e.closest(".js-details-container"),o=Ft(n),s=le();let r=!1;s&&(r=It(n,s));const i=_e();let c=!1;i&&(c=Pt(n,i)),(o||r||c)&&U(F())}),d("click",".js-jump-to-menu-item",function({currentTarget:e}){const t=e.getAttribute("href").substring(1),n=document.querySelector(`[data-anchor="${t}"]`);if(n){const o=n.closest(".js-file.js-details-container");o.hidden=!1}W()});function Wt(e){if(!document.querySelector(".js-file-filter"))return;Ee(e);const n=le();n&&(n.checked=!e),U(F())}b(Wt,"toggledAllFileContents");var Wn=Object.defineProperty,zn=(e,t)=>Wn(e,"name",{value:t,configurable:!0});d("details:toggled-group",".js-file.js-details-container",function(e){e.target===e.currentTarget&&Wt(e.detail.open)}),d("details:toggled",".js-file.js-details-container",function(e){if(e.target!==e.currentTarget)return;const t=e.currentTarget;t.getBoundingClientRect().top<0&&B(t)}),N(()=>{const e=window.location.hash.slice(1);if(!e)return;const t=document.getElementsByName(e)[0];if(!t)return;const n=t.nextElementSibling;n&&n.matches(".js-file.js-details-container")&&(n.classList.add("open"),n.classList.add("Details--on"))}),h(".js-file-header-dropdown",{subscribe:e=>yt(e,"toggle",zt)});function zt({currentTarget:e}){const t=e,n=t.hasAttribute("open");t.closest(".js-file-header").classList.toggle("has-open-dropdown",n)}zn(zt,"toggleFileHeaderMenu");var Kn=Object.defineProperty,M=(e,t)=>Kn(e,"name",{value:t,configurable:!0});const ke="```suggestion",de="```",Qn=new RegExp(`${ke}(?:.*)
`,"i"),Xn=new RegExp(`${de}(
|$)`);function Fe(e,t){const n=e.slice(0,t).split(`
`);return e.split(`
`)[n.length-1]}M(Fe,"lineAtIndex");function Ie(e){const n=/^(\s+)/.exec(e);return n&&n[0]||""}M(Ie,"leadingWhitespace");function Kt(e){let t=`${ke}
`;return t+=`${e}
`,t+=de,t}M(Kt,"formatSuggestion");function J(e,t,n=0){const o=t.substring(n,t.length),s=e.exec(o);return s?s.index+n:-1}M(J,"findNextOccurrenceOf");function Pe(e,t){const n=[];let o=0,s=-1;for(;(s=J(Qn,e,o))>-1;){o=s+ke.length;const r=J(Xn,e,o);if(r===-1)return!1;o=r+de.length,n.push([s,r])}return n.some(r=>t>r[0]&&t<r[1])}M(Pe,"cursorInSuggestionBlock");function Qt(e){const t=e.selectionStart;if(!Pe(e.value,t))return!1;const n=e.value,o=Fe(n,t);if(o===null)return!1;const r=`
${Ie(o)}`,i=n.substr(0,t)+r+n.substr(t);V(e,i);const c=t+r.length;return e.setSelectionRange(c,c),!0}M(Qt,"insertNewSuggestionLine");function Xt(e,t){const n=Kt(e),o=t.selectionStart,s=t.value,r=J(/\n/,s,o),i=s.trim()==="",c=Fe(s,o),u=c.trim()==="",l=`
${de}`.length;let a=s,m=0;if(i)a=n,m=a.length-l;else if(r===-1)u?(a=s+n,m=a.length-l):(a=[s,n].join(`
`),m=a.length-l);else if(u){const p=Ie(c),y=o-p.length,j=s.substring(0,y),f=s.substring(r,s.length);a=[j,n,f].join(""),m=a.length-f.length-l}else if(Pe(s,o)){const p=J(/```/,s,o)+3,y=s.substring(0,p),j=s.substring(p,s.length);a=[y,`
`,n,j].join(""),m=a.length-j.length-l}else{const p=s.substring(0,r),y=s.substring(r,s.length);a=[p,`
`,n,y].join(""),m=a.length-y.length-l}V(t,a),t.focus(),t.setSelectionRange(m,m)}M(Xt,"insertSuggestionBlock");var Gn=Object.defineProperty,C=(e,t)=>Gn(e,"name",{value:t,configurable:!0});const w={addToBatchEnabled:".js-add-to-batch-enabled",unchangedSuggestion:".js-unchanged-suggestion",closedOrMergedPull:".js-closed-pull",viewingSubset:".js-viewing-subset-changes",leftBlob:".js-validation-on-left-blob",rightBlob:".js-validation-on-right-blob",outdatedComment:".js-outdated-comment",resolvedThread:".js-resolved-thread",pendingReview:".js-pending-review",isMultiLine:".js-is-multiline"};function Gt(e){const t=e.getAttribute("data-lines");if(t!=null){const o=e.closest(".js-suggested-changes-container").querySelector(".js-comment-field");Xt(t,o)}}C(Gt,"renderSuggestionBlock");function Me(e,t){const n=document.querySelectorAll(".js-apply-suggestion-button"),o=e.querySelector(".js-disabled-apply-suggestion-button");for(const s of n){const r=o.cloneNode(!0);I(r,t),s.closest("details").replaceWith(r)}}C(Me,"disableAllApplySuggestionButtons");function Re(e){const t=document.querySelector(".js-batched-suggested-changes-container");t&&t.classList.add("d-none");for(const n of document.querySelectorAll(".js-apply-single-suggestion"))n.classList.remove("d-none"),n.disabled=!0,n.setAttribute("aria-label",e);for(const n of document.querySelectorAll(".js-batched-suggested-changes-add"))n.classList.remove("d-none"),n.disabled=!0,n.setAttribute("aria-label",e);for(const n of document.querySelectorAll(".js-batched-suggested-changes-remove"))n.classList.add("d-none");for(const n of document.querySelectorAll(".js-focus-commit-suggestions-form-button"))n.classList.add("d-none");for(const n of document.querySelectorAll(".js-pending-batched-suggestion-label"))n.classList.add("d-none")}C(Re,"disableBatchSuggestionsButtons");function I(e,t){e.setAttribute("aria-label",t),e.classList.remove("d-none")}C(I,"displayButton");function fe(e,t){const n=document.querySelector(".js-suggested-changes-inline-validation-template").cloneNode(!0);n.classList.remove("js-suggested-changes-inline-validation-template");const o=n.querySelector(".js-suggested-changes-inline-error-message");o.textContent=e.trim(),t.parentNode.insertBefore(n,t.nextSibling)}C(fe,"validateOnPreview"),d("click",".js-suggested-change-toolbar-item",function(e){const t=e.currentTarget;t instanceof HTMLButtonElement&&!t.disabled&&Gt(t)}),d("click",".js-refresh-after-suggestion",function(){window.location.reload()});function Oe(e){if(!document.querySelector(".js-suggested-changes-subset-files"))return;const n=e.querySelectorAll(".js-suggested-change-toolbar-item"),o=w.viewingSubset,s=document.querySelector(o).textContent.trim();for(const r of n)r.disabled=!0,r.setAttribute("aria-label",s)}C(Oe,"validateInlineCommmentsContainer"),h(".js-inline-comments-container",{add(e){Oe(e)}}),h(".js-preview-body .js-apply-changes",{add(e){const t=e.closest(".js-suggested-changes-container");if(!t)return e.remove();const n=document.querySelector(w.rightBlob).textContent,o=document.querySelector(w.leftBlob).textContent,s=e.closest(".js-suggested-changes-blob");if(t.getAttribute("data-thread-side")!==""){if(t.getAttribute("data-thread-side")==="left")return fe(o,s),e.remove()}else{const a=e.closest(".js-inline-comment-form"),m=a.querySelector('input[name="side"]');if(!a||!m)return e.remove();if(a&&m.value==="left")return fe(o,s),e.remove()}const r=e.previousElementSibling,i=r.querySelector(".js-blob-code-deletion"),c=r.querySelectorAll(".js-blob-code-addition");if(!i||c.length===0)return;const u=i.textContent,l=Array.from(c).map(a=>a.textContent);if(u===l.join(`
`))return fe(n,s),e.remove();e.remove()}}),h(".js-comment-body .js-apply-changes",{add(e){const t=e.closest(".js-suggested-changes-container");if(!t)return e.remove();const n=t.querySelector(".js-suggested-changes-template");if(!(n instanceof HTMLTemplateElement))return e.remove();const o=n.content.cloneNode(!0),s=o.querySelector(".js-disabled-apply-suggestion-button");let r;try{r=o.querySelector(".js-batched-suggested-changes-add")}catch(f){if(f.name!=="QueryError")throw f}if(document.querySelectorAll(".js-suggested-changes-files-tab").length){const f=document.querySelector(w.addToBatchEnabled).textContent;r&&(r.removeAttribute("disabled"),r.setAttribute("aria-label",f))}const i=document.querySelector(".js-pull-header-details"),c=i&&i.getAttribute("data-pull-is-open")==="true",u=e.closest(".js-resolvable-timeline-thread-container"),l=n.getAttribute("data-comment-pending")==="true",a=t.classList.contains("js-selection-contains-deletions");if(u&&u.getAttribute("data-resolved")==="true"){const f=document.querySelector(w.resolvedThread).textContent,S=o.querySelector("details");return S&&S.remove(),I(s,f),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",f)),e.replaceWith(o)}if(!c){const f=document.querySelector(w.closedOrMergedPull).textContent;return I(s,f),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",f)),e.replaceWith(o)}if(l){const f=document.querySelector(w.pendingReview).textContent;return o.querySelector("details").remove(),I(s,f),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",f)),e.replaceWith(o)}if(a){const f=document.querySelector(w.leftBlob).textContent;return o.querySelector("details").remove(),I(s,f),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",f)),e.replaceWith(o)}const m=document.querySelector(".js-suggested-changes-subset-files"),p=n.getAttribute("data-outdated-comment")==="true";if(m||p){let f;return m?f=document.querySelector(w.viewingSubset).textContent:p&&(f=document.querySelector(w.outdatedComment).textContent),o.querySelector("details").remove(),I(s,f),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",f)),e.replaceWith(o)}const y=o.querySelector(".js-single-suggested-change-form"),j=e.closest(".js-suggested-changes-blob");if(j){const f=j.querySelector(".js-blob-code-deletion"),S=j.querySelectorAll(".js-blob-code-addition");if(!f)return;const L=f.textContent,E=Array.from(S).map(_=>_.textContent);if(E.length>0&&L===E.join(`
`)){const _=document.querySelector(w.unchangedSuggestion).textContent;o.querySelector("details").remove(),I(s,_),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",_))}else for(const _ of E){const D=document.createElement("input");D.setAttribute("type","hidden"),D.setAttribute("name","value[]"),D.value=_,y.appendChild(D)}}e.replaceWith(o)}}),h(".js-pull-header-details",{add(e){const t=e.getAttribute("data-pull-is-open")==="true",n=document.querySelector(".js-suggested-changes-template");if(t||!(n instanceof HTMLTemplateElement))return;const o=n.content,s=document.querySelector(w.closedOrMergedPull).textContent;Me(o,s),Re(s)}}),h(".js-suggested-changes-subset-files",{add(){const e=document.querySelector(".js-suggested-changes-template");if(!(e instanceof HTMLTemplateElement))return;const t=e.content,n=document.querySelector(w.viewingSubset).textContent;Me(t,n),Re(n)}}),d("click",".js-apply-suggestion-button",async function(e){const t=e.currentTarget.parentElement;if(t){const n=t.querySelector(".js-suggestion-commit-title");setTimeout(()=>n.focus(),1)}}),d("click",".js-dismiss-suggested-change-onboarding-notice",async function(e){const t=e.currentTarget.getAttribute("data-url"),n=e.currentTarget.parentElement.querySelector(".js-data-url-csrf"),o=new FormData;if(o.append("notice","suggested_changes_onboarding_prompt"),(await fetch(t,{method:"POST",mode:"same-origin",body:o,headers:{"Scoped-CSRF-Token":n.value,"X-Requested-With":"XMLHttpRequest"}})).ok){const r=document.querySelectorAll(".js-suggested-change-onboarding-notice");for(const i of r)i.remove()}}),ve("keypress",".js-comment-field",function(e){if(e.key==="Enter"){const t=e.target;Qt(t)&&e.preventDefault()}}),ve("keypress",".js-suggestion-commit-message",function(e){const t=e.currentTarget;e.key==="Enter"&&t.setAttribute("rows","3")});function Jt(e){const n=e.closest(".js-review-state-classes").querySelectorAll("[data-pending-batched-suggestion]").length;for(const s of document.querySelectorAll(".js-pending-batched-suggested-changes-count"))s.textContent=String(n);const o=document.querySelector(".js-reenable-add-to-batch").textContent;for(const s of document.querySelectorAll("[data-batched-suggestion-reenable-sibling]"))s.removeAttribute("data-batched-suggestion-reenable-sibling"),s.removeAttribute("disabled"),s.setAttribute("aria-label",o);if(n>0){e.hidden=!1;const s=e.querySelector(".js-batched-suggested-changes-toggle");s.classList.add("anim-pulse-in"),s.addEventListener("animationend",()=>s.classList.remove("anim-pulse-in"),{once:!0});for(const r of document.querySelectorAll(".js-apply-single-suggestion"))r.classList.add("d-none");for(const r of document.querySelectorAll(".js-batched-suggested-changes-add")){const i=r.closest(".js-suggested-change-form-container");i.getAttribute("data-pending-batched-suggestion")==="true"||i.getAttribute("data-comment-pending")==="true"||i.getAttribute("data-outdated-comment")==="true"?r.classList.add("d-none"):r.classList.remove("d-none"),r.getAttribute("data-batched-suggestion-disabled-by-sibling")==="true"&&(r.removeAttribute("data-batched-suggestion-disabled-by-sibling"),r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",document.querySelector(".js-one-suggestion-per-line").textContent))}for(const r of document.querySelectorAll(".js-batched-suggested-changes-remove"))r.closest(".js-suggested-change-form-container").getAttribute("data-pending-batched-suggestion")==="true"?r.classList.remove("d-none"):r.classList.add("d-none");for(const r of document.querySelectorAll(".js-focus-commit-suggestions-form-button")){const i=r.closest(".js-suggested-change-form-container"),c=i.getAttribute("data-comment-pending")==="true",u=i.getAttribute("data-outdated-comment")==="true",l=i.getAttribute("data-resolved-comment")==="true",p=r.closest(".js-inline-comments-container").querySelector('input[name="side"]').value==="left";c||u||l||p?r.classList.add("d-none"):r.classList.remove("d-none")}for(const r of document.querySelectorAll(".js-pending-batched-suggestion-label"))r.closest(".js-suggested-change-form-container").getAttribute("data-pending-batched-suggestion")==="true"?r.classList.remove("d-none"):r.classList.add("d-none")}else{e.hidden=!0;for(const s of document.querySelectorAll(".js-apply-single-suggestion"))s.classList.remove("d-none");for(const s of document.querySelectorAll(".js-batched-suggested-changes-add"))s.classList.remove("d-none");for(const s of document.querySelectorAll(".js-batched-suggested-changes-remove"))s.classList.add("d-none");for(const s of document.querySelectorAll(".js-focus-commit-suggestions-form-button"))s.classList.add("d-none");for(const s of document.querySelectorAll(".js-pending-batched-suggestion-label"))s.classList.add("d-none")}}C(Jt,"updatePendingSuggestionsState");function Be(){const e=document.querySelector(".js-batched-suggested-changes-container");e&&setTimeout(()=>Jt(e))}C(Be,"updatePendingSuggestionsHandler"),d("click",".js-batched-suggested-changes-add",function(e){const t=e.target,n=t.closest(".js-suggested-change-form-container");if(n.getAttribute("data-comment-pending")==="true"||n.getAttribute("data-outdated-comment")==="true"||t.getAttribute("data-batched-suggestion-disabled-by-sibling")==="true")return;n.setAttribute("data-pending-batched-suggestion","true");const o=t.closest(".js-inline-comments-container");for(const s of o.querySelectorAll(".js-batched-suggested-changes-add"))s.setAttribute("data-batched-suggestion-disabled-by-sibling","true");t.removeAttribute("data-batched-suggestion-disabled-by-sibling"),Be()}),d("click",".js-batched-suggested-changes-remove",function(e){e.currentTarget.closest(".js-suggested-change-form-container").removeAttribute("data-pending-batched-suggestion");const n=e.currentTarget.closest(".js-inline-comments-container");for(const o of n.querySelectorAll(".js-batched-suggested-changes-add"))o.setAttribute("data-batched-suggestion-reenable-sibling","true");Be()}),d("click",".js-focus-commit-suggestions-form-button",function(e){e.preventDefault(),window.location.href="#clear-commit-suggestions",window.location.href="#commit-suggestions"}),d("click",".js-dismiss-batched-suggested-changes-onboarding-notice",async function(e){const t=e.currentTarget.getAttribute("data-url"),n=e.currentTarget.parentElement.querySelector(".js-data-url-csrf"),o=new FormData;if(o.append("notice","batched_suggested_changes_onboarding_prompt"),(await fetch(t,{method:"POST",mode:"same-origin",body:o,headers:{"Scoped-CSRF-Token":n.value,"X-Requested-With":"XMLHttpRequest"}})).ok)for(const r of document.querySelectorAll(".js-batched-suggested-change-onboarding-notice"))r.remove()});function $e(e,t){const n=e.querySelector("input[name=commit_title]"),o=e.querySelector("textarea[name=commit_message]");let s=n.value.trim();s===""&&(s=n.defaultValue);const r=o.value.trim();r!==""&&(s=`${s}

${r}
`),n.disabled=!0,o.disabled=!0;const i=document.createElement("input");i.setAttribute("type","hidden"),i.setAttribute("name","message"),i.value=s,e.appendChild(i);const c=document.createElement("input");c.setAttribute("type","hidden"),c.setAttribute("name","changes"),c.value=JSON.stringify(t),e.appendChild(c)}C($e,"convertFormInputs"),d("click",".js-single-suggested-change-form .js-suggested-changes-submit",function(e){const n=e.currentTarget.closest(".js-single-suggested-change-form"),o=Array.from(n.querySelectorAll('input[name="value[]"]')).map(r=>r.value),s=[{commentId:n.querySelector("input[name=comment_id]").value,path:n.querySelector("input[name=path]").value,suggestion:o}];$e(n,s)}),x(".js-single-suggested-change-form",async function(e,t){const n=e.closest(".js-suggested-change-form-container"),o=e.closest("details"),s=n.querySelector(".js-suggestion-applied"),i=e.closest(".js-suggested-changes-contents").querySelector(".js-error-message-placeholder");try{await t.json(),s.classList.remove("d-none"),n.querySelector(".js-batched-suggested-changes-add").classList.add("d-none"),o.remove(),window.location.reload()}catch(c){if(c.name!=="QueryError"){const u=c.response.json&&c.response.json.error,l=i.querySelector(".js-error-message");i.hidden=!1,l.textContent=u,n.prepend(i),e.closest(".js-suggested-change-form-container").querySelector(".js-batched-suggested-changes-add").classList.add("d-none"),o.remove()}}}),d("click",".js-suggestion-batch-submit",function(e){const t=e.currentTarget.closest(".js-batched-suggested-changes-form"),n=[];for(const o of document.querySelectorAll("[data-pending-batched-suggestion]")){const s=o.querySelector(".js-single-suggested-change-form"),r=Array.from(s.querySelectorAll('input[name="value[]"]')).map(i=>i.value);n.push({commentId:s.querySelector("input[name=comment_id]").value,path:s.querySelector("input[name=path]").value,suggestion:r})}$e(t,n)}),x(".js-batched-suggested-changes-form",async function(e,t){try{await t.json();const n=e.closest(".js-batched-suggested-changes-container");n.hidden=!0,window.location.reload()}catch(n){const o=n.response.json&&n.response.json.error,r=e.closest(".js-batched-suggested-changes-container").querySelector(".js-error-message-container"),i=r.querySelector(".js-error-message");i.textContent=o,r.hidden=!1}}),h(".js-files-tab-stale",{add(){const e=document.querySelector(".js-batched-suggested-changes-container");e&&setTimeout(()=>{e.hidden=!0})}});var Jn=Object.defineProperty,v=(e,t)=>Jn(e,"name",{value:t,configurable:!0});d("click",".js-add-single-line-comment",function(e){const t=e.currentTarget,n=t.closest(".file");De(n);const o=Yt(t)||Zt(t),s=Array.from(o.querySelectorAll(".js-line-comments")).pop();ne(s)});function Yt(e){const t=e.closest("tr"),n=He(t,".js-inline-comments-container"),o=Y("#js-inline-comments-single-container-template").querySelector("div.js-line-comments");if(n instanceof Element){const s=Array.from(o.querySelectorAll(".js-inline-comment-form")).pop();return s instanceof HTMLFormElement&&Z(s,t.querySelector("button.js-add-line-comment")),n.querySelector(".js-line-comments").appendChild(o),n}}v(Yt,"existingCommentRow");function He(e,t){const n=e.nextElementSibling;return n&&n.matches(t)?n:null}v(He,"next");function Zt(e){const t=e.closest("tr"),n=Y("#js-inline-comments-single-container-template"),o=n.querySelector(".js-inline-comment-form");return o instanceof HTMLFormElement&&Z(o,e),t.after(n),n}v(Zt,"insertCommentRow"),d("click",".js-add-split-line-comment",function(e){const t=e.currentTarget,n=t.closest(".file");De(n);const o=t.closest("tr"),s=t.getAttribute("data-type")==="addition"?"js-addition":"js-deletion",r=cn(o),i=rn(r,s,t),c=Array.from(i.querySelectorAll(".js-line-comments")).pop();ne(c)}),x(".js-inline-comment-form",async function(e,t){en(e);let n;try{n=await t.json()}catch(c){if(c.response){let u;try{u=c.response.json}catch(l){}if(u){tn(e,u);return}}throw c}const o=n.json,s=o.inline_comment,r=e.closest(".js-line-comments");s&&r.querySelector(".js-comments-holder").append(oe(document,s));const i=o.inline_comment_thread;i&&r.replaceWith(oe(document,i)),jt(e)});function en(e){const t=e.querySelector(".js-comment-form-error");t&&(t.hidden=!0,t.textContent=null)}v(en,"resetInlineCommentError");function tn(e,t){const n=e.querySelector(".js-comment-form-error");let o;t.errors?Array.isArray(t.errors)?o=t.errors.join(", "):o=t.errors:o="There was an error posting your comment.",n.textContent=o,n.style.display="block",n.hidden=!1,n.classList.remove("d-none")}v(tn,"handleInlineCommentError");function nn(e){const[t,n]=e.match(/^new_inline_comment_(?:discussion|diff)_(?:[\w-]+)_(\d+)_(\d+)$/)||[];if(!t)return;const o=document.querySelector(`.js-inline-comment-form input[name='in_reply_to'][value='${n}']`);if(!o)return;const s=o.closest(".js-line-comments");s&&ne(s)}v(nn,"showReplyForm");function on(e){const[t,n]=e.match(/^new_inline_comment_diff_(?:[\w-]+)_(\d+)$/)||[];if(!t)return;const o=document.querySelector(`.js-add-line-comment[data-anchor='${t}'][data-position='${n}']`);o&&o.click()}v(on,"showCommentForm"),document.addEventListener("session:resume",function(e){const t=e.detail;nn(t.targetId),on(t.targetId)});function De(e){const t=e.querySelector(".js-toggle-file-notes");t instanceof HTMLInputElement&&V(t,!0)}v(De,"ensureInlineNotesEnabled");function Ne(){for(const e of document.querySelectorAll(".file .js-inline-comments-container")){const n=e.querySelectorAll(".js-comments-holder > *").length>0,o=e.querySelector(".js-inline-comment-form-container"),s=!!o&&o.classList.contains("open");!n&&!s&&e.remove()}}v(Ne,"cleanupInlineCommentContainers");function Y(e){const o=document.querySelector(e).firstElementChild.cloneNode(!0),s=o.querySelector("textarea");return s instanceof HTMLTextAreaElement&&(s.value=""),o}v(Y,"cloneTemplate"),h(".js-comment",{remove:Ne}),d("inlinecomment:focus",".js-inline-comment-form-container",function(e){const t=e.target.querySelector(".js-suggested-changes-container");t&&Ve(t)}),h(".js-suggested-changes-container.is-comment-editing",e=>{Ve(e)});function sn(e,t){const n=new URLSearchParams(e.search.slice(1)),o=t.elements.namedItem("in_reply_to")||t.elements.namedItem("comment_id"),s=t.querySelector("textarea");if(n.append("textarea_id",s.id),o instanceof HTMLInputElement&&o.value)return n.append("comment_id",o.value),n;const r=t.elements.namedItem("path"),i=t.elements.namedItem("start_side"),c=t.elements.namedItem("start_line"),u=t.elements.namedItem("side"),l=t.elements.namedItem("line"),a=t.elements.namedItem("start_commit_oid"),m=t.elements.namedItem("end_commit_oid"),p=t.elements.namedItem("base_commit_oid");return!(r instanceof HTMLInputElement)||!(i instanceof HTMLInputElement)||!(c instanceof HTMLInputElement)||!(u instanceof HTMLInputElement)||!(l instanceof HTMLInputElement)||!(a instanceof HTMLInputElement)||!(m instanceof HTMLInputElement)||!(p instanceof HTMLInputElement)?null:(n.append("path",r.value),n.append("start_side",i.value),n.append("start_line",c.value),n.append("end_side",u.value),n.append("end_line",l.value),n.append("start_commit_oid",a.value),n.append("end_commit_oid",m.value),n.append("base_commit_oid",p.value),n)}v(sn,"paramsForSuggestionButton");async function Ve(e){const t=e.querySelector(".js-suggestion-button-placeholder");if(!t)return;const n=t.getAttribute("data-src-base");if(!n)return;const o=new URL(n,window.location.origin),s=t.closest(".js-inline-comment-form")||t.closest(".js-comment-update");if(!(s instanceof HTMLFormElement))return;const r=sn(o,s);if(!r)return;o.search=r.toString();const i=await Se(document,o.toString());t.innerHTML="",t.appendChild(i)}v(Ve,"loadSuggestionButton"),document.addEventListener("inlinecomment:collapse",()=>{Ne()});function rn(e,t,n){const o=e.querySelector(`.js-line-comments.${t}`);if(o){const u=Array.from(o.querySelectorAll(".js-inline-comment-form")).pop();return Z(u,n),o}const s=Y("#js-inline-comments-split-form-container-template");s.classList.add(t);const r=s.querySelector(".js-inline-comment-form");r instanceof HTMLFormElement&&Z(r,n);const i=e.querySelectorAll(`.${t}`);i[i.length-1].after(s);for(const u of i)u.remove();return s}v(rn,"expandLineCommentsEmptyCells");function cn(e){let t=He(e,".js-inline-comments-container");return t||(t=Y("#js-inline-comments-split-container-template"),e.after(t),t)}v(cn,"inlineCommentsSplitContainerForLine");function Ue(e,t,n,o){if(e.classList.remove("color-bg-success","color-bg-danger"),o){e.textContent=t;return}if(n==="right"){e.classList.add("color-fg-success"),e.textContent=`+${t}`;return}if(n==="left"){e.classList.add("color-fg-danger"),e.textContent=`-${t}`;return}e.textContent=String(t)}v(Ue,"applyMultiLinePreview");const ln={R:"right",L:"left"};function an(e,t){const n=St();if(!n||n.end.is(n.start))return;if(!vt(t,n)){we();return}const{start:{lineNumber:o},end:{lineNumber:s}}=n;let{start:{side:r},end:{side:i}}=n;const c=Number(t.getAttribute("data-line")),u=t.getAttribute("data-side");if(c!==s||!n.end.isContext()&&u!==ln[i]){we();return}const l=ln[r],a=e.elements.namedItem("start_line"),m=e.elements.namedItem("start_side"),p=e.elements.namedItem("line"),y=e.elements.namedItem("side"),j=e.elements.namedItem("preview_start_side"),f=e.elements.namedItem("preview_side");if(a instanceof HTMLInputElement&&m instanceof HTMLInputElement&&p instanceof HTMLInputElement&&y instanceof HTMLInputElement&&j instanceof HTMLInputElement&&f instanceof HTMLInputElement){a.value=String(o),m.value=l,m.value=j.value=m.value,f.value=y.value;const S=a.value;r=m.value;const L=p.value;i=y.value;const E=e.closest(".js-inline-comment-form-container");if(S&&L){const _=E.querySelector(".js-multi-line-preview"),D=_.querySelector(".js-multi-line-preview-start"),Eo=_.querySelector(".js-multi-line-preview-end"),ko=n.start.isContext(),Fo=n.end.isContext();Ue(D,S,r,ko),Ue(Eo,L,i,Fo),_.hidden=!1,E.classList.add("is-multiline")}else E.querySelector(".js-multi-line-preview").hidden=!0,E.classList.remove("is-multiline");Oe(E)}}v(an,"fillMultilineFormFields");function Z(e,t){const n=["type","path","position","line","side","original-line"];for(const c of n){const u=e.elements.namedItem(c);if(u instanceof HTMLInputElement){const l=t.getAttribute(`data-${c}`)||"";u.value=l}}an(e,t);const o=t.getAttribute("data-position")||"",s=t.getAttribute("data-anchor")||"",r=e.querySelector(".js-comment-field"),i=r.id.replace(/^r\d+ /,"").replace("${anchor}",s).replace("${position}",o);for(const c of e.querySelectorAll(`[for="${r.id}"]`))c.setAttribute("for",i);for(const c of e.querySelectorAll(`[data-hotkey-scope="${r.id}"]`))c.setAttribute("data-hotkey-scope",i);r.id=i}v(Z,"fillTemplateFormFields");var Yn=Object.defineProperty,R=(e,t)=>Yn(e,"name",{value:t,configurable:!0});h(".js-diff-progressive-container",function(e){We(e);const t=e.querySelector(".js-diff-progressive-loader");!t||t.addEventListener("load",function(){We(e)})});function We(e){const t=ze();if(!t)return;Ke(e,t);const n=un(e,t);!n||(B(n),Qe(n))}R(We,"processProgressiveContainer"),h(".js-diff-load-container",function(e){const t=e.querySelector(".js-diff-entry-loader");!t||t.addEventListener("load",function(){e.closest(".js-file").classList.remove("hide-file-notes-toggle");const o=ze();!o||Ke(e,o)})}),d("click",".js-diff-load",function(e){if(e.target.classList.contains("js-ignore-this"))return;const t=e.currentTarget.closest(".js-diff-load-container");Qe(t)});function ze(){return window.location.hash.slice(1)}R(ze,"urlAnchor");function Ke(e,t){let n;t.match(/^diff-.+[LR]\d+-[LR]\d+/)?n=k(e.ownerDocument,t.substring(0,t.indexOf("-",5))):n=k(e.ownerDocument,t),n&&e.contains(n)&&(Ae(n),B(n))}R(Ke,"scrollToAnchor");function un(e,t){const n=dn(e,t);return n||fn(e,t)}R(un,"getEntryFromAnchor");function dn(e,t){const n=/^(diff-[0-9a-f]{32})(?:[L|R]\d+)?$/.exec(t);if(!n)return;const o=n[1],s=e.querySelector(`a[name='${o}']`);if(!s)return;const r=s.nextElementSibling;if(!(r&&!r.querySelector(".js-diff-load-container")))return r}R(dn,"getEntryFromDiffAnchor");function fn(e,t){const n=/^(?:r|commitcomment-)(\d+)$/.exec(t);if(!n)return;const o=n[1],s=e.querySelector(`#diff-with-comment-${o}`);return s?s.closest(".js-file"):void 0}R(fn,"getEntryFromCommentAnchor");function Qe(e){const t=e.querySelector(".js-diff-entry-loader"),n=e.querySelector(".js-diff-placeholder"),o=e.querySelector("button.js-diff-load"),s=e.querySelector(".js-button-text");n.setAttribute("fill","url('#animated-diff-gradient')"),s.textContent=o.getAttribute("data-disable-with")||"",o.disabled=!0;const r=new URL(t.getAttribute("data-fragment-url")||"",window.location.origin);return t.src=r.toString(),t.data}R(Qe,"loadDiff");var Zn=Object.defineProperty,mn=(e,t)=>Zn(e,"name",{value:t,configurable:!0});d("click",".js-rendered, .js-source",function(e){const t=e.currentTarget;if(t.classList.contains("selected")){e.preventDefault();return}gn(t),pn(t)}),x(".js-prose-diff-toggle-form",async function(e,t){const n=e.closest(".js-details-container"),o=n.querySelector(".js-file-content"),s=await t.html();for(;o.lastChild;)o.removeChild(o.lastChild);o.append(s.html),n.classList.toggle("display-rich-diff"),n.classList.toggle("show-inline-notes")});function gn(e){const t=e.closest(".js-file-header"),n=e.classList.contains("js-rendered"),o=e.classList.contains("js-source"),s=t.getAttribute("data-short-path"),r=t.getAttribute("data-anchor"),i=new URL(window.location.href,window.location.origin),c=new URLSearchParams(i.search.slice(1));i.hash=r,n?c.set("short_path",s):o&&c.delete("short_path"),i.search=c.toString(),te(null,"",i.toString())}mn(gn,"updateWindowLocation");function pn(e){for(const t of document.querySelectorAll(".js-rendered, .js-source"))t.classList.remove("selected"),t.removeAttribute("aria-current");e.classList.add("selected"),e.setAttribute("aria-current","true")}mn(pn,"updateSelectedButton"),d("click",".js-toc-retry",function(e){if(!(e.target instanceof Element))return;const n=e.target.closest(".select-menu").querySelector("include-fragment"),o=n.getAttribute("src");n.setAttribute("src",""),n.setAttribute("src",o)}),d("details-menu-select",".js-pull-base-branch-menu",function(){const e=document.querySelector(".js-change-base-template").content.cloneNode(!0);e instanceof DocumentFragment&&Le({content:e})},{capture:!0});var eo=Object.defineProperty,O=(e,t)=>eo(e,"name",{value:t,configurable:!0});function Xe(e,t,n){const o=Array.from(e.querySelectorAll('[role="menuitem"]'));let s=o.indexOf(t),r=o.indexOf(n);if(s===-1)throw new Error("Couldn't find startIndex in container");if(r===-1)throw new Error("Couldn't find endItem in container");Ge(e),o[r].classList.add("is-last-in-range"),s>r&&([s,r]=[r,s]);for(const i of o.slice(s,r+1))i.classList.add("is-range-selected")}O(Xe,"highlightSelectedRange");async function hn(e,t){function n(o){Xe(e,t,o.target.closest('[role="menuitem"]'))}O(n,"highlightRange"),Xe(e,t,t),e.addEventListener("mouseover",n),await new Promise(o=>window.addEventListener("keyup",o,{once:!0})),e.removeEventListener("mouseover",n),Ge(e)}O(hn,"observeShiftRangeHighlights");function Ge(e){for(const t of e.querySelectorAll('[role="menuitem"]'))t.classList.remove("is-range-selected","is-last-in-range")}O(Ge,"resetHighlight"),h(".js-diffbar-range-menu .js-diffbar-range-list",{subscribe:bn});function bn(e){const t=e.closest("details-menu"),n=e.classList.contains("js-diffbar-invert-range");let o=!1;function s(i){o=i.shiftKey,o&&i.preventDefault()}O(s,"clicked");function r(i){if(!o)return;i.preventDefault();const c=i.detail.relatedTarget;if(c.classList.contains("is-range-selected")){i.stopPropagation();const u=e.querySelectorAll(".is-range-selected"),l=n?u.length-1:0,a=n?0:u.length-1,m=u[l],p=u[a],y=e.getAttribute("data-range-url"),j=m.getAttribute("data-parent-commit"),f=p.getAttribute("data-commit"),S=j&&f?`${j}..${f}`:f,L=y.replace("$range",S);wt({url:L,container:document.querySelector("#js-repo-pjax-container")})}else i.stopImmediatePropagation(),hn(e,c)}return O(r,"selected"),e.addEventListener("click",s,{capture:!0}),t.addEventListener("details-menu-select",r),{unsubscribe:()=>{e.removeEventListener("click",s,{capture:!0}),t.removeEventListener("details-menu-select",r)}}}O(bn,"manageRangeHighlight"),d("toggle",".js-diffbar-range-menu",function(e){const t=e.currentTarget;if(!t.hasAttribute("open"))return;const n=t.querySelector(".in-range");n&&n.focus()},{capture:!0});const{getItem:to,setItem:no}=At("localStorage"),yn="comparison-default-tab",oo=["commits","files","commit_comments"],so=["#commits_bucket","#files_bucket","#commit_comments_bucket"],ro={files(){return[document.querySelector("[data-tab-name=files]"),document.querySelector("#files_bucket")]},commits(){return[document.querySelector("[data-tab-name=commits]"),document.querySelector("#commits_bucket")]},commit_comments(){return[document.querySelector("[data-tab-name=commit_comments]"),document.querySelector("#commit_comments_bucket")]}};h(".js-compare-tab",()=>{const e=to(yn);if(e===null||!oo.includes(e))return;const[t,n]=ro[e]();if(!!(t&&n)){for(const o of document.querySelectorAll(".js-compare-tab.selected"))o.classList.remove("selected");t.classList.add("selected"),n.classList.add("selected");for(const o of document.querySelectorAll("#commits_bucket, #files_bucket, #commit_comments_bucket"))o.classList.add("d-none");n.classList.remove("d-none")}}),d("click",".js-compare-tab",function(e){for(const o of document.querySelectorAll(".js-compare-tab.selected"))o.classList.remove("selected");e.currentTarget.classList.add("selected");for(const o of document.querySelectorAll("#commits_bucket, #files_bucket, #commit_comments_bucket"))o.classList.add("d-none");const t=e.currentTarget,n=t.hash;if(n&&so.includes(n)){const o=t.getAttribute("data-tab-name");no(yn,o)}document.querySelector(n).classList.remove("d-none"),e.preventDefault()}),N(function({target:e}){if(!(e instanceof HTMLElement))return;const t=e.closest("#commits_bucket, #files_bucket, #commit_comments_bucket");t&&t instanceof HTMLElement&&!qe(t)&&document.querySelector(`.js-compare-tab[href="#${t.id}"]`).click()}),d("click",".js-toggle-range-editor-cross-repo",function(){document.querySelector(".js-range-editor").classList.toggle("is-cross-repo")}),d("pjax:click",".js-range-editor",function(e){const t=document.querySelector(".js-compare-pr");if(t&&t.classList.contains("open")){const n=e.detail.options,o=new URL(n.url,window.location.origin);o.search.match(/expand=1/)||(o.search+=`${o.search?"&":""}expand=1`,n.url=o.toString())}}),h(".js-compare-pr.open",{add(){document.body.classList.add("is-pr-composer-expanded")},remove(){document.body.classList.remove("is-pr-composer-expanded")}}),d("change",".js-collab-checkbox",function({currentTarget:e}){const t=e.form;for(const s of t.querySelectorAll(".errored"))s.classList.remove("errored");const o=e.closest(".js-collab-option").querySelector(".js-status-indicator");o.classList.remove("status-indicator-success","status-indicator-failed"),o.classList.add("status-indicator-loading")}),x(".js-collab-form",async function(e,t){try{await t.text()}catch(n){for(const o of e.querySelectorAll(".status-indicator-loading")){o.classList.remove("status-indicator-loading"),o.classList.add("status-indicator-failed");const s=o.closest(".js-collab-option");s.classList.add("errored");const r=s.querySelector(".js-collab-checkbox");r.checked=!r.checked}for(const o of e.querySelectorAll(".status-indicator-success"))o.classList.remove("status-indicator-success");return}for(const n of e.querySelectorAll(".errored"))n.classList.remove("errored");for(const n of e.querySelectorAll(".status-indicator-loading"))n.classList.remove("status-indicator-loading"),n.classList.add("status-indicator-success")}),d("click",".js-split-diff-view",function(){const e=document.querySelector(".js-unified-diff-view-box"),t=document.querySelector(".js-split-diff-view-box"),n=document.querySelector(".js-split-diff-view-option"),o=document.querySelector(".js-unified-diff-view-option");t.classList.add("color-border-accent-emphasis"),t.classList.remove("color-border-default"),e.classList.remove("color-border-accent-emphasis"),e.classList.add("color-border-default"),o.checked=!1,n.checked=!0}),d("click",".js-unified-diff-view",function(){const e=document.querySelector(".js-unified-diff-view-box"),t=document.querySelector(".js-split-diff-view-box"),n=document.querySelector(".js-split-diff-view-option"),o=document.querySelector(".js-unified-diff-view-option");t.classList.remove("color-border-accent-emphasis"),t.classList.add("color-border-default"),e.classList.add("color-border-accent-emphasis"),e.classList.remove("color-border-default"),o.checked=!0,n.checked=!1});var io=Object.defineProperty,co=(e,t)=>io(e,"name",{value:t,configurable:!0});function jn(e,t){const n=e.querySelector(".js-commit-group-commits"),o=t.querySelectorAll(".js-commit-group-commits > .js-commit");for(const r of o)r.classList.toggle("py-3"),n.appendChild(r);const s=e.querySelector(".js-commit-group-count");s instanceof HTMLElement&&(s.textContent=`${n.querySelectorAll(".js-commit").length}`),t.remove()}co(jn,"mergeCommitGroups"),h(".js-timeline-item > .js-commit-group",{constructor:HTMLElement,add(e){if(e.querySelector(".js-commit-group-header"))return;const t=e.closest(".js-timeline-item");if(!(t instanceof HTMLElement))return;let n=t.previousElementSibling;n instanceof HTMLElement&&(!n.classList.contains("js-timeline-item")&&(n=n.previousElementSibling,!(n instanceof HTMLElement))||!n.querySelector(".js-commit-group")||jn(n,t))}});var lo=Object.defineProperty,Je=(e,t)=>lo(e,"name",{value:t,configurable:!0});d("details:toggled",".js-pull-merging",function({currentTarget:e}){const t=Array.from(e.querySelectorAll(".js-merge-pull-request")),n=t.some(qe);for(const o of t)o.classList.toggle("is-dirty",n)}),d("click",".js-merge-box-try-again",async function({currentTarget:e}){const t=e.getAttribute("data-form-target");if(!["js-cleanup-branch-form","js-merge-branch-form","js-queue-branch-form","js-update-branch-form"].includes(t))return;const o=e.closest(".js-pull-merging").getElementsByClassName(t)[0];ye(o,"submit")}),document.addEventListener("session:resume",function(e){const t=document.getElementById(e.detail.targetId);if(t){const n=t.closest(".js-merge-pull-request");if(n){const o=n.closest(".js-details-container");o&&o.classList.add("open")}}}),d("change",".js-merge-button-toggle",function({currentTarget:e}){const t=e.closest(".js-merge-pr"),n=!e.checked;for(const o of t.querySelectorAll(".js-merge-commit-button"))o.disabled=n}),d("change",".js-auto-merge-admin-override",function({currentTarget:e}){const t=e.closest(".js-merge-message-container"),n=e.checked,o=t.querySelector(".js-merge-box"),s=t.querySelector(".js-auto-merge-box"),r=t.querySelector(".js-merge-form"),i=t.querySelector(".js-auto-merge-form"),c=t.querySelectorAll(".js-merge-menu-item"),u=t.querySelectorAll(".js-auto-merge-menu-item");if(o.hidden=!n,s.hidden=n,r.hidden=!n,i.hidden=n,n)for(let l=0;l<u.length;l++){const a=u[l].getAttribute("aria-checked");a!==null&&c[l].setAttribute("aria-checked",a)}else for(let l=0;l<c.length;l++){const a=c[l].getAttribute("aria-checked");a!==null&&u[l].setAttribute("aria-checked",a)}}),d("details-menu-selected",".js-update-branch-method-menu",vn,{capture:!0});function vn(e){const t=e.detail.relatedTarget,n=t.closest(".js-merge-pr");n.classList.toggle("is-updating-via-merge",t.value==="merge"),n.classList.toggle("is-updating-via-rebase",t.value==="rebase");const o=n.querySelector(".js-update-branch-type");o&&(o.value=t.value)}Je(vn,"updateBranchUpdateMethod"),d("submit",".js-update-branch-form",function({currentTarget:e}){var t;const n=e.closest(".js-merge-pr"),o=n==null?void 0:n.querySelector(".btn-group-update-merge");o&&(o.disabled=!0);const s=n==null?void 0:n.querySelector(".btn-group-update-rebase");s&&(s.disabled=!0);const r=n==null?void 0:n.querySelector(".js-update-method-menu-button");r&&(r.classList.add("disabled","user-select-none"),r.setAttribute("aria-disabled","true"));const i=n==null?void 0:n.querySelector(".js-update-branch-method-menu");i&&((t=i==null?void 0:i.parentNode)==null||t.removeChild(i))}),d("details-menu-selected",".js-merge-method-menu",Sn,{capture:!0});function Sn(e){const t=e.detail.relatedTarget,n=t.closest(".js-merge-pr"),o=n.querySelector(".js-merge-pull-request"),s=n.querySelector(".js-auto-merge-admin-override"),r=n.querySelector(".js-merge-method-menu-button"),i=r.getAttribute("data-merge-button-class");r.classList.toggle("btn-danger",t.hasAttribute("data-dangerous-action")),i&&r.classList.toggle(i,!t.hasAttribute("data-dangerous-action"));const c=n.querySelector(".js-merge-title"),u=n.querySelector(".js-merge-message");c.defaultValue===c.value&&(c.defaultValue=c.value=t.getAttribute("data-input-title-value")),u.defaultValue===u.value&&(u.defaultValue=u.value=t.getAttribute("data-input-message-value")),n.classList.toggle("is-merging",t.value==="merge"),n.classList.toggle("is-squashing",t.value==="squash"),n.classList.toggle("is-rebasing",t.value==="rebase"),n.classList.toggle("is-merging-group",t.value==="group"),n.classList.toggle("is-merging-solo",t.value==="solo"),n.classList.toggle("is-merging-jump",t.value==="jump");const l=o.classList.contains("js-admin-override-merge")&&t.value==="merge"||o.classList.contains("js-admin-override-squash")&&t.value==="squash"||o.classList.contains("js-admin-override-rebase")&&t.value==="rebase",a=n.querySelectorAll(".js-admin-override");for(const L of a)L.hidden=!l||s!==null;const m=n.querySelector(".js-merge-type");m&&(m.value=t.value);const p=l&&!n.querySelector(".js-merge-button-toggle").checked,y=n.querySelectorAll(".js-merge-pull-request .js-merge-commit-button");for(const L of y)L.type=t.value===L.value?"submit":"button",L.disabled=p;o.classList.toggle("color-fg-danger",l);const j=n.closest(".js-pull-merging"),f=new URL(j.getAttribute("data-url"),window.location.origin),S=new URLSearchParams(f.search);S.set("merge_type",t.value),f.search=S.toString(),j.setAttribute("data-url",f.toString())}Je(Sn,"updateForMergeMethod"),d("details:toggled",".js-merge-pr",function(e){const n=e.currentTarget.querySelector(".js-merge-message");n&&ye(n,"change")}),h(".branch-action-item.js-details-container.open",{add(e){for(const t of e.querySelectorAll(".js-merge-review-section"))t.setAttribute("open","")},remove(e){for(const t of e.querySelectorAll(".js-merge-review-section"))t.removeAttribute("open")}}),d("toggle",".js-details-container .js-merge-review-section",function({currentTarget:e}){const t=e.closest(".js-details-container"),n=t.querySelectorAll(".js-merge-review-section").length,o=t.querySelectorAll(".js-merge-review-section[open]").length;o===0?se(t,{force:!1}):o===n&&se(t,{force:!0})},{capture:!0}),h("poll-include-fragment[data-to-be-polled]",{constructor:gt,add(e){function t(){e.src=e.getAttribute("data-to-be-polled"),e.removeAttribute("data-to-be-polled")}Je(t,"onVisible"),document.hidden?document.addEventListener("visibilitychange",t,{once:!0}):t()}});var ao=Object.defineProperty,uo=(e,t)=>ao(e,"name",{value:t,configurable:!0});let Ye=!1;document.addEventListener("keydown",function(e){e.key==="Alt"&&(Ye=!0)}),document.addEventListener("keyup",function(e){e.key==="Alt"&&(Ye=!1)}),d("click",".js-toggle-outdated-comments",function(e){if(!(e instanceof MouseEvent&&e.altKey||Ye)||!(e.currentTarget instanceof HTMLElement))return;const t=e.currentTarget,n=t.closest("details");function o(){const s=n.hasAttribute("open");for(const r of document.querySelectorAll(".js-toggle-outdated-comments"))r!==t&&r.closest("details").toggleAttribute("open",s)}uo(o,"toggleAll"),setTimeout(()=>{re(t,o)})});var fo=Object.defineProperty,wn=(e,t)=>fo(e,"name",{value:t,configurable:!0});function Ze(){const e=document.querySelectorAll(".pull-request-ref-restore");for(let t=0;t<e.length;t++)e[t].classList.toggle("last",t===e.length-1)}wn(Ze,"syncLast"),h(".pull-request-ref-restore",{add:Ze,remove:Ze});function et(){const e=document.querySelector("#js-pull-restorable")!=null,t=document.querySelector(".js-pull-discussion-timeline");t&&t.classList.toggle("is-pull-restorable",e)}wn(et,"syncRestorable"),h("#js-pull-restorable",{add:et,remove:et});var mo=Object.defineProperty,H=(e,t)=>mo(e,"name",{value:t,configurable:!0});function An(e){const t=e.closest(".js-review-state-classes"),n=t.querySelectorAll(".js-pending-review-comment").length,o=document.querySelector(".js-review-changes");t.classList.toggle("is-review-pending",n>0);for(const s of document.querySelectorAll(".js-pending-review-comment-count"))s.textContent=String(n);for(const s of document.querySelectorAll(".js-pending-comment-count-type"))s instanceof HTMLElement&&(s.textContent=s.getAttribute(n===1?"data-singular-string":"data-plural-string"));if(n>0){o.textContent=o.getAttribute("data-pending-message")||"";const s=e.querySelector(".js-reviews-toggle");s.classList.add("anim-pulse-in"),s.addEventListener("animationend",()=>s.classList.remove("anim-pulse-in"),{once:!0})}else o.textContent=o.getAttribute("data-message")||""}H(An,"updatePendingCommentsCount");function tt(){const e=document.querySelector(".js-reviews-container");e&&setTimeout(()=>An(e))}H(tt,"updatePendingHandler"),x(".js-inline-comment-form",async function(e,t){await t.text(),tt()}),x(".js-pending-review-comment .js-comment-delete",async function(e,t){await t.text(),tt()}),x(".js-resolvable-timeline-thread-form",async function(e,t){try{const n=await t.html();e.closest(".js-resolvable-timeline-thread-container").replaceWith(n.html)}catch(n){Lt()}}),d("click",".js-resolvable-thread-toggler",function(e){e.target instanceof HTMLElement&&nt(e.target)}),x(".js-toggle-user-reviewed-file-form",async function(e,t){const n=e.closest(".js-details-container"),o=!!n.querySelector(".js-reviewed-file"),s=n.classList.contains("open"),r=n.querySelector(".js-file-header"),i=r?r.getBoundingClientRect().top===60:!1;(!o&&s||o&&!s)&&(se(n),i&&B(n));const c=e.querySelector(".js-reviewed-toggle");o?(c.classList.remove("color-bg-accent","border-blue-light"),c.classList.add("color-fg-muted","color-border-default")):(c.classList.remove("color-fg-muted","color-border-default"),c.classList.add("color-bg-accent","border-blue-light"));const u=c.querySelector(".js-reviewed-checkbox");u.disabled=!0;const l=document.querySelector("progress-bar");l instanceof ge&&(o?l.decrement():l.increment());const a=await t.html(),m=e.closest(".js-replace-file-header-review");m&&(m.replaceWith(a.html),n.hasAttribute("data-file-user-viewed")?n.removeAttribute("data-file-user-viewed"):n.setAttribute("data-file-user-viewed","true"))}),N(()=>{const e=window.location.hash.slice(1);if(!e)return;const t=document.getElementById(e);if(!t)return;const n=t.closest(".js-resolvable-thread-contents");n!==null&&n.classList.contains("d-none")&&nt(t)});function nt(e){const t=e.closest(".js-resolvable-timeline-thread-container");t.querySelector(".js-resolvable-thread-toggler-container").classList.toggle("border-bottom"),t.querySelector(".js-resolvable-thread-contents").classList.toggle("d-none");for(const o of t.querySelectorAll(".js-resolvable-thread-toggler"))o.classList.toggle("d-none")}H(nt,"toggleResolvableThread");function me(e){return e.getAttribute("ratio").split("/")}H(me,"parseRatio");function ot(e){if(e){const[t,n]=me(e),o=parseInt(t)/parseInt(n),s=e.querySelector(".js-review-progress"),r=e.querySelector(".js-review-count");s instanceof HTMLElement&&r&&(s.style.width=`${o*100}%`,r.textContent=`${t} / ${n}`)}}H(ot,"refresh");class ge extends HTMLElement{static get observedAttributes(){return["ratio"]}attributeChangedCallback(t){t==="ratio"&&ot(this)}connectedCallback(){ot(this)}increment(){const[t,n]=me(this),o=Math.min(parseInt(t)+1,parseInt(n));this.setAttribute("ratio",`${o}/${n}`)}decrement(){const[t,n]=me(this),o=Math.min(parseInt(t)-1,parseInt(n));this.setAttribute("ratio",`${o}/${n}`)}}H(ge,"ProgressBarElement"),window.customElements.get("progress-bar")||(window.ProgressBarElement=ge,window.customElements.define("progress-bar",ge)),document.addEventListener("pjax:end",function(){for(const e of document.querySelectorAll(".js-pull-refresh-on-pjax"))qt(e)}),h(".js-updating-pull-request-commits-count",{add(e){const t=e.textContent,n=document.querySelectorAll(".js-updateable-pull-request-commits-count");for(const o of n)o.textContent=t}}),(async()=>{if(await xt,window.performance&&window.performance.navigation&&window.performance.navigation.type===window.performance.navigation.TYPE_RELOAD){const e=document.getElementById("js-report-pull-request-refresh");e&&_t(e)}})();var Ln=Object.defineProperty,go=Object.defineProperties,po=Object.getOwnPropertyDescriptors,qn=Object.getOwnPropertySymbols,ho=Object.prototype.hasOwnProperty,bo=Object.prototype.propertyIsEnumerable,xn=(e,t,n)=>t in e?Ln(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yo=(e,t)=>{for(var n in t||(t={}))ho.call(t,n)&&xn(e,n,t[n]);if(qn)for(var n of qn(t))bo.call(t,n)&&xn(e,n,t[n]);return e},jo=(e,t)=>go(e,po(t)),A=(e,t)=>Ln(e,"name",{value:t,configurable:!0});function _n(e){const t=e.querySelector(".js-diff-entry-loader"),n=e.querySelector(".js-diff-placeholder"),o=e.querySelector("button.js-diff-load"),s=e.querySelector(".js-button-text");n.setAttribute("fill","url('#animated-diff-gradient')"),s.textContent=o.getAttribute("data-disable-with")||"",o.disabled=!0;const r=new URL(t.getAttribute("data-fragment-url")||"",window.location.origin);return t.src=r.toString(),t.data}A(_n,"loadDiff");function ee(e){Ae(e),B(e)}A(ee,"scrollIntoView"),N(A(function(){const t=Cn(window.location.hash);!t||k(document,t.hashFragment)&&!t.lastLine||pe(t,0)},"handleHashChange"));function Cn(e){if(!e)return;const t=Ct(e);if(!t)return;const n=t[1],o=t[2],s=t[3],r=t[5],i=n+o+s,c=n+o;return{anchor:n,side:o,line:s,lastLine:r,hashFragment:i,partialHashFragment:c}}A(Cn,"parseExpansion");async function pe(e,t){const{anchor:n,side:o,line:s,lastLine:r,hashFragment:i,partialHashFragment:c}=e,u=k(document,n);if(!u)return;const l=u.nextElementSibling;if(!l)return;const a=it(l,o,s,r);if(!a.length){const j=k(document,i);if(j){ee(j);return}const f=l.querySelector(".js-diff-load-container");if(!f)return;try{await _n(f);const S=k(document,i);S instanceof HTMLElement&&ee(S)}catch(S){ee(l)}return}await Tn(a,c);const m=1,p=k(document,i);it(l,o,s,r).length?pe(e,t):p?ee(p):t<m&&pe(e,t+1)}A(pe,"findAndActivateExpander"),d("click",".js-expand",function(e){e.preventDefault(),st(e.currentTarget)});function Tn(e,t){return Promise.all(e.map(n=>st(n,t)))}A(Tn,"activateExpanders");async function st(e,t){let n;if(t){const a=t.slice(-1)==="R"?"data-right-range":"data-left-range",m=e.getAttribute(a)||"",p=parseInt(m.split("-")[0],10);n=t+p}else n=e.hash.slice(1);const o=e.getAttribute("data-url"),s=new URL(o,window.location.origin),r=new URLSearchParams(s.search.slice(1));r.append("anchor",n),s.search=r.toString(),window.location.hash!==""&&window.history.replaceState(null,"","#");const i=await Se(document,s.toString()),c=e.closest(".js-file");if(!c)return;const u=e.closest(".js-expandable-line"),l=rt(u,".file-diff-line");l?re(l,()=>{u.replaceWith(i)}):u.replaceWith(i),En(c)}A(st,"activateExpander");function rt(e,t){const n=e.nextElementSibling;return n instanceof HTMLElement&&n.matches(t)?n:null}A(rt,"next");function it(e,t,n,o){const s=parseInt(n,10),r=parseInt(o||"",10);return Array.from(e.querySelectorAll(".js-expand")).filter(i=>{const c=t==="R"?"data-right-range":"data-left-range",u=(i.getAttribute(c)||"").split("-"),l=parseInt(u[0],10),a=parseInt(u[1],10);return l<=s&&s<=a||s<=l&&a<=r?!0:l<=r&&r<=a})}A(it,"findExpanders");function En(e){const t=e.querySelector(".js-expand-full-wrapper");if(!t)return;Array.from(e.querySelectorAll(".js-expand")).length===0&&t.parentElement.removeChild(t)}A(En,"removeExpandAllButton");async function kn(e,t){const n=await self.fetch(t,{headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!n.ok)throw new Error(`Request to blob_expand failed with status code ${n.status}`);return Tt(Et(e),n,!0),(await n.json()).map(s=>jo(yo({},s),{content:oe(e,s.content)}))}A(kn,"fetchManySafeDocumentFragments"),d("click",".js-expand-full",async e=>{e.preventDefault();const t=e.currentTarget,n=t.closest(".file"),o=t.getAttribute("data-url"),s=In(n);if(s.length===0)return;const r=new URL(o,window.location.origin),i=new URLSearchParams(r.search.slice(1));for(const a of s)i.append("ranges[]last_left",a.left.start),i.append("ranges[]left",a.left.end),i.append("ranges[]left_hunk_size",a.left.size),i.append("ranges[]last_right",a.right.start),i.append("ranges[]right",a.right.end),i.append("ranges[]right_hunk_size",a.right.size),i.append("ranges[]position",a.position);r.search=i.toString();const c=await kn(document,r.toString()),u=[...n.querySelectorAll(".js-expand")];for(const{content:a,position:m}of c){const p=parseInt(m,10),y=u[p];if(!y)return;const j=y.closest(".js-expandable-line"),f=rt(j,".file-diff-line");f?re(f,()=>{j.after(a)}):j.after(a),j.setAttribute("hidden","true")}t.setAttribute("hidden","true");const l=n.querySelector(".js-collapse-diff");l&&l.removeAttribute("hidden"),n.classList.add("open"),n.classList.add("Details--on")}),d("click",".js-collapse-diff",e=>{const t=e.currentTarget,n=t.closest(".file"),o=[...n.querySelectorAll('.blob-expanded[data-expanded-full="true"]')];for(const i of o)i.parentElement.removeChild(i);const s=[...n.querySelectorAll(".js-expandable-line")];for(const i of s)i.removeAttribute("hidden");t.setAttribute("hidden","true");const r=n.querySelector(".js-expand-full");r&&r.removeAttribute("hidden")});function Fn(e,t){const o=new URL(e.getAttribute("data-url"),window.location.origin).searchParams;return{position:t.toString(),left:{start:o.get("last_left"),end:o.get("left"),size:o.get("left_hunk_size")},right:{start:o.get("last_right"),end:o.get("right"),size:o.get("right_hunk_size")}}}A(Fn,"getExpanderRange");function In(e){const n=Array.from(e.querySelectorAll(".js-expand")).map((r,i)=>Fn(r,i));let o=!1;const s=[];for(let r=0;r<n.length;r++){if(o){o=!1;continue}const i=n[r],c=n[r+1];o=c&&i.left.start===c.left.start&&i.left.end===c.left.end&&i.right.start===c.right.start&&i.right.end===c.right.end,s.push(i)}return s}A(In,"getAllHunkRanges");var vo=Object.defineProperty,So=(e,t)=>vo(e,"name",{value:t,configurable:!0});class he{constructor(t){this.selection=t,this.anchorNode=t.anchorNode}range(){var t;let n;return((t=this.selection)==null?void 0:t.rangeCount)>0&&(n=this.selection.getRangeAt(0)),n}canBeSideProtected(){try{return!!(this.hasSelectedText()&&this.confinedTable())}catch(t){return!1}}isSideProtected(){var t;try{return!!((t=this.confinedTable())==null?void 0:t.getAttribute("data-lock-side-selection"))}catch(n){return!1}}hasSelectedText(){const t=this.range();return t?t.toString().length>0:!1}clearSelectedText(){this.selection.removeAllRanges()}confinedTable(){var t,n;const o=(n=(t=this.range())==null?void 0:t.commonAncestorContainer)==null?void 0:n.parentElement;return(o==null?void 0:o.matches(".diff-table"))?o:(o==null?void 0:o.matches(".js-file-content"))?o==null?void 0:o.querySelector("table.diff-table"):o==null?void 0:o.closest("table.diff-table")}unprotectedSide(){var t,n;let o;return this.anchorNode instanceof HTMLTableCellElement?o=this.anchorNode.closest("td[data-split-side]"):o=(n=(t=this.anchorNode)==null?void 0:t.parentElement)==null?void 0:n.closest("td[data-split-side]"),o==null?void 0:o.getAttribute("data-split-side")}protectedSide(){return this.unprotectedSide()==="left"?"right":"left"}applySideProtection(){if(this.unprotectedSide()){const t=this.confinedTable(),n=this.unprotectedSide();t&&n&&t.setAttribute("data-lock-side-selection",n)}}clearSideProtection(){const t=document.querySelectorAll("table[data-lock-side-selection]");for(const n of t)n.removeAttribute("data-lock-side-selection")}filteredTableRows(){const t=[];for(let n=0;n<this.selection.rangeCount;n++){const s=this.selection.getRangeAt(n).cloneContents();if(s.querySelectorAll("td").length){const r=`td[data-split-side=${this.protectedSide()}], td.js-linkable-line-number, td.empty-cell`,i=s.querySelectorAll(r);for(const c of i)c.parentNode&&c.parentNode.removeChild(c);t.push(...s.children)}else{const r=document.createElement("TR"),i=document.createElement("TD");i.append(...s.childNodes),r.append(i),t.push(r)}}return t}contentToString(){var t;const n=[],o=document.createElement("table");o.classList.add("invisible"),o.append(...this.filteredTableRows()),(t=this.confinedTable())==null||t.append(o);const s=o.children;for(let r=0;r<s.length;r++){const c=s[r].innerText;c&&(c===`
`?n.push(""):n.push(c))}return o.remove(),n.join(`
`)}}So(he,"DiffTableSideProtection");var wo=Object.defineProperty,q=(e,t)=>wo(e,"name",{value:t,configurable:!0});function ct(e){return Math.floor(e/2)}q(ct,"tableSide");function be(e,t){const n=e.parentElement;if(!n)return;const o=n.children;let s;if(o.length===4)for(let r=0,i=o.length;r<i;r++)o[r]===e&&(s=ct(r));for(let r=0,i=o.length;r<i;r++){const c=o[r];(s==null||ct(r)===s)&&c.classList.toggle("is-hovered",t)}}q(be,"onHover"),h(".diff-table",function(e){let t=null;function n(){t&&be(t,!1),t=null}q(n,"onMouseEnter");function o(i){t&&be(t,!1),i.target instanceof HTMLElement&&(t=i.target.closest("td.blob-code"),t&&be(t,!0))}q(o,"onMouseOver");function s(){e.addEventListener("mouseenter",n),e.addEventListener("mouseleave",n),e.addEventListener("mouseover",o)}q(s,"add");function r(){e.removeEventListener("mouseenter",n),e.removeEventListener("mouseleave",n),e.removeEventListener("mouseover",o)}return q(r,"remove"),{add:s,remove:r}});function lt(e){var t;const n=document.getSelection();if(n){const o=new he(n);o.isSideProtected()&&((t=e.clipboardData)==null||t.setData("text/plain",o.contentToString()),e.preventDefault())}}q(lt,"copySidedContent");function at(e){const t=document.getSelection(),n=e.button===2;if(t&&!n){const o=new he(t);o.isSideProtected()&&(o.clearSelectedText(),o.clearSideProtection())}}q(at,"clearSidedProtection");function ut(){const e=document.getSelection();if(e){const t=new he(e);t.canBeSideProtected()?t.applySideProtection():t.clearSideProtection()}}q(ut,"protectSidedContent"),h(".js-diff-container",function(){function e(){document.addEventListener("copy",lt),document.addEventListener("mousedown",at),document.addEventListener("selectionchange",ut)}q(e,"add");function t(){document.removeEventListener("copy",lt),document.removeEventListener("mousedown",at),document.removeEventListener("selectionchange",ut)}return q(t,"remove"),{add:e,remove:t}});var Ao=Object.defineProperty,Lo=(e,t)=>Ao(e,"name",{value:t,configurable:!0});function T(){const e=document.querySelector("meta[name=diff-view]"),t=e&&e instanceof HTMLMetaElement?e.content:"",n=document.querySelector(".js-file-diff-split"),o=!!(t==="split"&&n||document.querySelector(".wants-full-width-container"));document.body.classList.toggle("full-width",o)}Lo(T,"syncBodyClass"),h("meta[name=diff-view]",{add:T,remove:T}),h(".js-file-diff-split",{add:T,remove:T}),h(".js-compare-tab.selected",{add:T,remove:T}),h(".wants-full-width-container",{add:T,remove:T});var qo=Object.defineProperty,Pn=(e,t)=>qo(e,"name",{value:t,configurable:!0});d("change",".js-toggle-file-notes",function(e){const t=e.currentTarget;t.closest(".file").classList.toggle("show-inline-notes",t.checked)});function dt(e){const t=e.some(n=>n.checked);for(const n of e)V(n,!t)}Pn(dt,"toggleCheckboxes"),d("click",".js-toggle-all-file-notes",function(e){const t=Array.from(document.querySelectorAll(".js-toggle-file-notes"));dt(t),e.preventDefault()}),d("click",".js-toggle-all-file-annotations",function(e){const t=Array.from(document.querySelectorAll(".js-toggle-file-check-annotations"));dt(t),e.preventDefault()}),h(".js-inline-comments-container",function(e){let t;const n=e.closest(".file");if(n)return{add:t=Pn(function(){const s=n.querySelector(".js-inline-comments-container")!=null;n.classList.toggle("has-inline-notes",s)},"remove"),remove:t}}),d("change",".js-toggle-file-check-annotations",function(e){const t=e.currentTarget,n=t.closest(".file").querySelectorAll(".js-inline-annotations");for(const o of n)o instanceof HTMLElement&&(o.hidden=!t.checked)});var xo=Object.defineProperty,_o=(e,t)=>xo(e,"name",{value:t,configurable:!0});function ft(e){const t=e.parentElement,n=t.querySelectorAll("td.js-line-comments").length,o=t.querySelectorAll("td.js-line-comments.is-collapsed").length;t.classList.toggle("is-collapsed",o>0&&n===o)}_o(ft,"updateRow"),h("td.js-line-comments.is-collapsed",{add:ft,remove:ft});var Mn=Object.defineProperty,Co=Object.getOwnPropertyDescriptor,Rn=(e,t)=>Mn(e,"name",{value:t,configurable:!0}),To=(e,t,n,o)=>{for(var s=o>1?void 0:o?Co(t,n):t,r=e.length-1,i;r>=0;r--)(i=e[r])&&(s=(o?i(t,n,s):i(s))||s);return o&&s&&Mn(t,n,s),s};class On{onItemSelected(t){if(!(t.currentTarget instanceof HTMLButtonElement))return;const n=t.currentTarget.querySelector(".js-ref-name").textContent,o=document.querySelector(".js-new-base-branch");o.value=btoa(n||"");const s=document.querySelector(".js-change-base-template").content.cloneNode(!0);s instanceof DocumentFragment&&Le({content:s})}}Rn(On,"InputDemuxBaseChangeContext");let mt=class extends HTMLElement{connectedCallback(){const e=this.getAttribute("data-context-type"),t={baseChange:new On};this.context=t[e]}onItemSelected(e){this.context.onItemSelected(e)}};Rn(mt,"InputDemuxContextWrapperElement"),mt=To([pt],mt)}}});
//# sourceMappingURL=diffs-b1d1b4db.js.map
